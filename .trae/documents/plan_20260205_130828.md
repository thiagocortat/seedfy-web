# Plano de Implementação: Perfil de Progresso e Troféus

Este plano visa implementar as funcionalidades de Consistência e Troféus no WebApp, conforme descrito nos PRDs.

## 1. Lógica e Data Fetching (Libs)
Faremos a implementação da lógica de negócios em arquivos utilitários para manter o código limpo e reutilizável.

*   **`apps/web/src/lib/streak-calculator.ts`**:
    *   Implementar função pura `calculateStreak(dates: string[])` para calcular streak atual e melhor streak.
    *   Garantir compatibilidade com a lógica do React Native (check-ins diários).
*   **`apps/web/src/lib/profile-progress.ts`**:
    *   Implementar `getProfileProgress(userId)` (Server Action/Function).
    *   Buscará: Total de dias ativos, dados para cálculo de streak e desafios concluídos.
    *   Retornará o `ProfileProgressDTO` definido no PRD.

## 2. Componentes de UI
Criaremos componentes reutilizáveis e estilizados com Tailwind CSS, seguindo o padrão visual existente.

*   **`apps/web/src/components/profile/consistency-card.tsx`**:
    *   Card exibindo 3 KPIs: Dias Ativos, Sequência Atual, Melhor Sequência.
    *   Estados de "zero check-ins" e mensagens de incentivo.
*   **`apps/web/src/components/profile/trophy-card.tsx`**:
    *   Card individual do troféu mostrando ícone, título e data.
*   **`apps/web/src/components/profile/trophies-preview.tsx`**:
    *   Seção para o Perfil principal.
    *   Exibe os últimos troféus (grid) e botão "Ver todos".

## 3. Páginas e Rotas (Next.js App Router)
Implementação das novas páginas e atualização da página de perfil existente.

*   **Atualizar `/app/profile/page.tsx`**:
    *   Integrar `ConsistencyCard` e `TrophiesPreview` acima do formulário de perfil.
    *   Realizar o data fetching no Server Component.
*   **Criar `/app/profile/trophies/page.tsx`**:
    *   Página de lista completa de troféus (grid paginado ou scroll infinito).
*   **Criar `/app/profile/trophies/[id]/page.tsx`**:
    *   Página de detalhe do troféu.
    *   Exibir informações detalhadas do desafio concluído e histórico (opcional).

## 4. Validação
*   Verificar cálculos de streak com diferentes cenários de dados.
*   Validar responsividade (Mobile/Desktop).
*   Garantir que a navegação entre perfil -> lista -> detalhe funcione corretamente.
